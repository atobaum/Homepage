function format_authors(e){var a="";for(var t in e){var r=e[t];switch(a+='<a href="/bookshelf/person/'+r.id+'">'+r.name+"</a>",r.type){case"author":a+=" 지음, ";break;case"translator":a+=" 번역, ";break;case"supervisor":a+=" 감수, ";break;case"illustrator":a+=" 그림, ";break;case"photo":a+=" 사진, "}}return a=a.substring(0,a.length-2)}function addReadingToTable(e){var a=e.book,t="";t+="<tr>",e.book?(t+='<td><a href="/bookshelf/book/'+a.isbn13+'">'+a.title_ko+"</a></td>",t+="<td>"+format_authors(a.authors)+"</td>"):(t+="<td>(책 정보 없음: "+e.book_id+') <a href="/bookshelf/book/'+e.book_id+'">추가</a></td>',t+="<td>책 정보 없음</td>"),t+='<td><a href="/bookshelf/reading/'+e.id+'">'+e.date_started+"</a></td>",t+="<td>"+e.date_finished+"</td>",t+="<td>"+e.user+"</td>",t+="</tr>",$("#tbdReadings").append(t)}function getRecentReadings(e,a){$.ajax({type:"get",url:"/bookshelf/api/recentReading?page="+e,success:function(a){if(0===a.ok)return void alert("오류 발생. 관리자에게 문의하세요.");var t=a.result.readings,r=a.result.maxPage;$("#tbdReadings").empty();for(var o in t)addReadingToTable(t[o]);var d=$('<a href="#"/>').addClass("item"),n=$(".pagination.menu");n.empty();for(var i=e-5>0?e-5:1,o=0;o<10;o++){var s=d.clone().text(i).click(function(){getRecentReadings($(this).text())});if(i++==e&&s.addClass("active"),s.appendTo(n),i>r)break}},error:function(){alert("error")}})}$(document).ready(function(){getRecentReadings(1)});