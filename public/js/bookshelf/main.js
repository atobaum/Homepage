function format_authors(r){var a="";for(var e in r){var t=r[e];switch(a+='<a href="/bookshelf/person/'+t.id+'">'+t.name+"</a>",t.type){case"author":a+=" 지음, ";break;case"translator":a+=" 번역, ";break;case"supervisor":a+=" 감수, ";break;case"illustrator":a+=" 그림, "}}return a=a.substring(0,a.length-2)}function addReadingToTable(r){var a=r.book,e="";e+="<tr>",e+='<td><a href="/bookshelf/book/'+a.isbn13+'">'+a.title_ko+"</a></td>",e+="<td>"+format_authors(a.authors)+"</td>",e+='<td><a href="/bookshelf/reading/'+r.id+'">'+r.date_started+"</a></td>",e+="<td>"+r.date_finished+"</td>",e+="<td>"+r.user+"</td>",e+="</tr>",$("#tbdReadings").append(e)}$(document).ready(function(){$.ajax({type:"get",url:"/bookshelf/api/recentReading",success:function(r){if(0===r.ok)return void alert("error");var a=r.result;for(var e in a)addReadingToTable(a[e])},error:function(){alert("error")}})});